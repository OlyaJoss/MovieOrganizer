(this["webpackJsonpbootcamp-m4-starter"]=this["webpackJsonpbootcamp-m4-starter"]||[]).push([[0],{26:function(e,t,a){e.exports=a(46)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),c=a.n(i),o=a(18),s=a(11),l=a(21),u=a(25),m=a(16),f=a(9),p={allMovies:{Search:[]},favMovies:[],inputValue:""};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_RES":return Object(f.a)(Object(f.a)({},e),{},{allMovies:t.payload.data});case"ON_SEARCH_UPDATE":return Object(f.a)(Object(f.a)({},e),{},{inputValue:t.payload.data});case"ADD_TO_FAV":if(e.favMovies.find((function(e){return e.imdbID===t.payload.data})))return Object(f.a)({},e);var a=e.allMovies.Search.find((function(e){return e.imdbID===t.payload.data}));return Object(f.a)(Object(f.a)({},e),{},{favMovies:[].concat(Object(m.a)(e.favMovies),[Object(f.a)({},a)])});case"CLEAR_FAV":return Object(f.a)(Object(f.a)({},e),{},{favMovies:[]});case"DEL_FAV":var n=e.favMovies.filter((function(e){return e.imdbID!==t.payload.data}));return Object(f.a)(Object(f.a)({},e),{},{favMovies:n});default:return e}},b=Object(l.b)(v,Object(l.a)(u.a)),h=a(3),d=a(4),E=a(6),O=a(5),j=a(1),_=(a(35),a(36),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"MustSee"))}}]),a}(n.Component));a(37);function y(e){return function(t){fetch("https://www.omdbapi.com/?s=".concat(e,"&apikey=f860633b")).then((function(e){return e.json()})).then((function(e){return console.log(e),t((a=e,console.log(a),{type:"FETCH_RES",payload:{data:a}}));var a}))}}var g=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).searchBoxSubmitHandler=function(t){t.preventDefault(),e.props.fetchMovies(e.props.inputValue)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.inputValue;return r.a.createElement("div",{className:"search-box"},r.a.createElement("form",{className:"search-box__form",onSubmit:this.searchBoxSubmitHandler},r.a.createElement("label",{className:"search-box__form-label"},"\u0418\u0441\u043a\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u043c \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e:",r.a.createElement("input",{value:t,type:"text",className:"search-box__form-input",placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Shawshank Redemption",onChange:function(t){return e.props.onSearchUpdate(t.target.value)}})),r.a.createElement("button",{type:"submit",className:"search-box__form-submit",disabled:!t},"\u0418\u0441\u043a\u0430\u0442\u044c")))}}]),a}(n.Component),N=Object(s.b)((function(e){return{inputValue:e.inputValue}}),(function(e){return{onSearchUpdate:function(t){return e(function(e){return{type:"ON_SEARCH_UPDATE",payload:{data:e}}}(t))},fetchMovies:function(t){return e(y(t))}}}))(g),M=(a(38),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.imdbID,n=t.Title,i=t.Year,c=t.Poster;return r.a.createElement("article",{className:"movie-item"},r.a.createElement("img",{className:"movie-item__poster",src:c,alt:n}),r.a.createElement("div",{className:"movie-item__info"},r.a.createElement("h3",{className:"movie-item__title"},n,"\xa0(",i,")"),r.a.createElement("button",{onClick:function(){return e.props.addToFav(a)},type:"button",disabled:this.props.favMovies.some((function(e){return e.imdbID===a})),className:"movie-item__add-button"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a")))}}]),a}(n.Component)),k=Object(s.b)((function(e){return{favMovies:e.favMovies}}),(function(e){return{addToFav:function(t){return e({type:"ADD_TO_FAV",payload:{data:t}})}}}))(M),C=(a(39),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("ul",{className:"movies"},this.props.allMovies.Search.map((function(e){return r.a.createElement("li",{className:"movies__item",key:e.imdbID},r.a.createElement(k,e))})))}}]),a}(n.Component)),L=Object(s.b)((function(e){return{allMovies:e.allMovies}}),null)(C),D=(a(40),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={savedLists:[],listTitle:""},e.saveList=function(){fetch("https://acb-api.algoritmika.org/api/movies/list",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:e.state.listTitle,movies:e.props.favMovies.map((function(e){return e.imdbID}))})}).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{savedLists:[].concat(Object(m.a)(e.savedLists),[{id:t.id,name:t.title}]),listTitle:""}})),e.props.clearFav()})).catch((function(e){console.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))},e.titleChange=function(t){e.setState({listTitle:t})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"favorites"},r.a.createElement("input",{value:this.state.listTitle,placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: \u043a\u043e\u043c\u0435\u0434\u0438\u0438",type:"text",onChange:function(t){return e.titleChange(t.target.value)},className:"favorites__name"}),r.a.createElement("ul",{className:"favorites__list"},this.props.favMovies.map((function(t){return r.a.createElement("li",{key:t.imdbID},t.Title," (",t.Year,")",r.a.createElement("button",{onClick:function(){return e.props.delFav(t.imdbID)},className:"favorites__delete",type:"button"}))}))),r.a.createElement("button",{onClick:function(){return e.saveList()},type:"button",className:"favorites__save"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"),this.state.savedLists.map.length>0&&this.state.savedLists.map((function(e){var t=e.id,a=e.name;return r.a.createElement("p",{key:t},r.a.createElement("a",{href:"/list/".concat(t),target:"_blank",rel:"noopener noreferrer"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a: ",a))})))}}]),a}(n.Component)),S=Object(s.b)((function(e){return{favMovies:e.favMovies}}),(function(e){return{delFav:function(t){return e(function(e){return{type:"DEL_FAV",payload:{data:e}}}(t))},clearFav:function(){return e({type:"CLEAR_FAV"})}}}))(D),T=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-page"},r.a.createElement(_,null),r.a.createElement("main",{className:"main-page__content"},r.a.createElement("section",{className:"main-page__main-section"},r.a.createElement("div",{className:"main-page__search-box"},r.a.createElement(N,null)),r.a.createElement("div",{className:"main-page__movies"},r.a.createElement(L,null))),r.a.createElement("aside",{className:"main-page__favorites"},r.a.createElement(S,null))))}}]),a}(n.Component),A=(a(41),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={favListId:[],favListTitle:"",favListMovies:[]},e.fetchList=function(t){fetch("https://acb-api.algoritmika.org/api/movies/list/".concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({favListId:t.movies,favListTitle:t.title});var a=t.movies.map((function(t){return console.log(t),e.getMovies(t)}));return console.log(a),Promise.all(a)})).then((function(t){console.log(t),e.setState({favListMovies:t})}))},e.getMovies=function(e){return fetch("https://www.omdbapi.com/?i=".concat(e,"&apikey=f860633b")).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;console.log(e),this.fetchList(e)}},{key:"render",value:function(){return 0===this.state.favListMovies.length?r.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f"):r.a.createElement("div",{className:"list-page"},r.a.createElement("h1",{className:"list-page__title"},this.state.favListTitle),r.a.createElement("ul",null,this.state.favListMovies.map((function(e){return r.a.createElement("li",{key:e.imdbID},r.a.createElement("a",{href:"https://www.imdb.com/title/".concat(e.imdbID,"/"),target:"_blank",rel:"noopener noreferrer"},e.Title," (",e.Year,")"))}))))}}]),a}(n.Component)),w=(a(42),a(43),function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(j.a,{path:"/",exact:!0,component:T}),r.a.createElement(j.a,{path:"/list/:id",exact:!0,component:A}))}}]),a}(r.a.Component));c.a.render(r.a.createElement(s.a,{store:b},r.a.createElement(o.a,null,r.a.createElement(w,null))),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.841919f3.chunk.js.map